import{d as ne,r as p,a as se,D as oe,c as ie,e as t,w as l,f as d,x as E,N as ue,m as M,j as o,t as C,b as r,g as P,K as F,M as G,E as h,o as B}from"./index-Nmxp319A.js";import{i as H}from"./index-u3wYLQ4o.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pe={class:"device-container"},re={class:"card-header"},me={class:"card-header"},ce={class:"card-header"},fe={class:"dialog-footer"},_e={class:"monitor-container"},ve={class:"monitor-header"},ye={class:"monitor-charts"},ge=ne({__name:"index",setup(ke){const O=p("network"),$=p(!1),g=p([{id:1,name:"核心交换机-01",ip:"192.168.1.1",type:"switch",status:"online",lastCheck:"2024-03-15 14:30:00"},{id:2,name:"核心交换机-02",ip:"192.168.1.2",type:"switch",status:"online",lastCheck:"2024-03-15 14:30:00"},{id:3,name:"边界路由器-01",ip:"192.168.1.3",type:"router",status:"online",lastCheck:"2024-03-15 14:30:00"},{id:4,name:"防火墙-01",ip:"192.168.1.4",type:"firewall",status:"online",lastCheck:"2024-03-15 14:30:00"},{id:5,name:"负载均衡器-01",ip:"192.168.1.5",type:"loadbalancer",status:"maintenance",lastCheck:"2024-03-15 14:30:00"}]),v=p([{id:1,name:"应用服务器-01",ip:"192.168.1.10",cpu:45,memory:60,status:"running",lastCheck:"2024-03-15 14:30:00"},{id:2,name:"应用服务器-02",ip:"192.168.1.11",cpu:52,memory:68,status:"running",lastCheck:"2024-03-15 14:30:00"},{id:3,name:"数据库服务器-01",ip:"192.168.1.12",cpu:75,memory:85,status:"running",lastCheck:"2024-03-15 14:30:00"},{id:4,name:"数据库服务器-02",ip:"192.168.1.13",cpu:68,memory:78,status:"running",lastCheck:"2024-03-15 14:30:00"},{id:5,name:"缓存服务器-01",ip:"192.168.1.14",cpu:35,memory:45,status:"running",lastCheck:"2024-03-15 14:30:00"}]),y=p([{id:1,name:"主存储-01",type:"SAN",capacity:"50TB",used:65,status:"normal",lastCheck:"2024-03-15 14:30:00"},{id:2,name:"主存储-02",type:"SAN",capacity:"50TB",used:58,status:"normal",lastCheck:"2024-03-15 14:30:00"},{id:3,name:"备份存储-01",type:"NAS",capacity:"30TB",used:45,status:"normal",lastCheck:"2024-03-15 14:30:00"},{id:4,name:"备份存储-02",type:"NAS",capacity:"30TB",used:42,status:"normal",lastCheck:"2024-03-15 14:30:00"},{id:5,name:"归档存储-01",type:"NAS",capacity:"100TB",used:35,status:"normal",lastCheck:"2024-03-15 14:30:00"}]),_=p(!1),J=p(),n=se({name:"",ip:"",type:"",description:""}),w=p(!1),b=p({}),j=p(),K=p(),m=p("network"),k=p(null),Q=()=>{_.value=!0,n.name="",n.ip="",n.type="switch",n.description="",m.value="network",k.value=null},W=()=>{_.value=!0,n.name="",n.ip="",n.type="server",n.description="",m.value="server",k.value=null},X=()=>{_.value=!0,n.name="",n.ip="",n.type="storage",n.description="",m.value="storage",k.value=null},T=s=>{_.value=!0,Object.assign(n,s),v.value.some(e=>e.id===s.id)?m.value="server":y.value.some(e=>e.id===s.id)?m.value="storage":m.value="network",k.value=s.id},z=s=>{w.value=!0,b.value=s,setTimeout(()=>{ee()},100)},Y=s=>{G.confirm(`确认重启设备"${s.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.success(`设备"${s.name}"重启命令已发送`)})},A=s=>{G.confirm(`确认删除设备"${s.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{if(g.value.some(e=>e.id===s.id)){const e=g.value.findIndex(c=>c.id===s.id);e!==-1&&g.value.splice(e,1)}else if(v.value.some(e=>e.id===s.id)){const e=v.value.findIndex(c=>c.id===s.id);e!==-1&&v.value.splice(e,1)}else if(y.value.some(e=>e.id===s.id)){const e=y.value.findIndex(c=>c.id===s.id);e!==-1&&y.value.splice(e,1)}h.success(`设备"${s.name}"已删除`)})},Z=()=>{if(k.value){let s=m.value==="network"?g.value:m.value==="server"?v.value:y.value;const e=s.findIndex(c=>c.id===k.value);e!==-1&&(s[e]={...s[e],...n}),h.success("配置已保存")}else{const s=Date.now();m.value==="network"?g.value.unshift({id:s,name:n.name,ip:n.ip,type:n.type,status:"online",lastCheck:new Date().toLocaleString()}):m.value==="server"?v.value.unshift({id:s,name:n.name,ip:n.ip,cpu:0,memory:0,status:"running",lastCheck:new Date().toLocaleString()}):m.value==="storage"&&y.value.unshift({id:s,name:n.name,type:n.type,capacity:"10TB",used:0,status:"normal",lastCheck:new Date().toLocaleString()}),h.success("添加成功")}_.value=!1},ee=()=>{const s=H(j.value);s.setOption({title:{text:"CPU使用率"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"]},yAxis:{type:"value",max:100},series:[{data:[30,40,35,50,45,60,55,45],type:"line",smooth:!0}]});const e=H(K.value);e.setOption({title:{text:"内存使用率"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"]},yAxis:{type:"value",max:100},series:[{data:[50,55,60,65,70,65,60,55],type:"line",smooth:!0}]}),window.addEventListener("resize",()=>{s.resize(),e.resize()})};return oe(()=>{}),(s,e)=>{const c=d("el-icon"),u=d("el-button"),i=d("el-table-column"),x=d("el-tag"),D=d("el-table"),S=d("el-card"),I=d("el-tab-pane"),N=d("el-progress"),te=d("el-tabs"),U=d("el-input"),V=d("el-form-item"),R=d("el-option"),le=d("el-select"),ae=d("el-form"),q=d("el-dialog"),L=ue("loading");return B(),ie("div",pe,[t(te,{modelValue:O.value,"onUpdate:modelValue":e[0]||(e[0]=a=>O.value=a)},{default:l(()=>[t(I,{label:"网络设备",name:"network"},{default:l(()=>[t(S,null,{header:l(()=>[r("div",re,[e[9]||(e[9]=r("span",null,"网络设备列表",-1)),t(u,{type:"primary",onClick:Q},{default:l(()=>[t(c,null,{default:l(()=>[t(P(F))]),_:1}),e[8]||(e[8]=o("添加设备 "))]),_:1,__:[8]})])]),default:l(()=>[E((B(),M(D,{data:g.value,style:{width:"100%"}},{default:l(()=>[t(i,{prop:"name",label:"设备名称"}),t(i,{prop:"ip",label:"IP地址"}),t(i,{prop:"type",label:"设备类型"}),t(i,{prop:"status",label:"状态"},{default:l(({row:a})=>[t(x,{type:a.status==="online"?"success":"danger"},{default:l(()=>[o(C(a.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),t(i,{prop:"lastCheck",label:"最后检查时间"}),t(i,{label:"操作",width:"250"},{default:l(({row:a})=>[t(u,{type:"primary",size:"small",onClick:f=>T(a)},{default:l(()=>e[10]||(e[10]=[o("配置")])),_:2,__:[10]},1032,["onClick"]),t(u,{type:"success",size:"small",onClick:f=>z(a)},{default:l(()=>e[11]||(e[11]=[o("监控")])),_:2,__:[11]},1032,["onClick"]),t(u,{type:"danger",size:"small",onClick:f=>A(a)},{default:l(()=>e[12]||(e[12]=[o("删除")])),_:2,__:[12]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[L,$.value]])]),_:1})]),_:1}),t(I,{label:"服务器设备",name:"server"},{default:l(()=>[t(S,null,{header:l(()=>[r("div",me,[e[14]||(e[14]=r("span",null,"服务器设备列表",-1)),t(u,{type:"primary",onClick:W},{default:l(()=>[t(c,null,{default:l(()=>[t(P(F))]),_:1}),e[13]||(e[13]=o("添加服务器 "))]),_:1,__:[13]})])]),default:l(()=>[E((B(),M(D,{data:v.value,style:{width:"100%"}},{default:l(()=>[t(i,{prop:"name",label:"服务器名称"}),t(i,{prop:"ip",label:"IP地址"}),t(i,{prop:"cpu",label:"CPU使用率"},{default:l(({row:a})=>[t(N,{percentage:a.cpu,status:a.cpu>80?"exception":""},null,8,["percentage","status"])]),_:1}),t(i,{prop:"memory",label:"内存使用率"},{default:l(({row:a})=>[t(N,{percentage:a.memory,status:a.memory>80?"exception":""},null,8,["percentage","status"])]),_:1}),t(i,{prop:"status",label:"状态"},{default:l(({row:a})=>[t(x,{type:a.status==="running"?"success":"danger"},{default:l(()=>[o(C(a.status==="running"?"运行中":"已停止"),1)]),_:2},1032,["type"])]),_:1}),t(i,{label:"操作",width:"300"},{default:l(({row:a})=>[t(u,{type:"primary",size:"small",onClick:f=>T(a)},{default:l(()=>e[15]||(e[15]=[o("配置")])),_:2,__:[15]},1032,["onClick"]),t(u,{type:"success",size:"small",onClick:f=>z(a)},{default:l(()=>e[16]||(e[16]=[o("监控")])),_:2,__:[16]},1032,["onClick"]),t(u,{type:"warning",size:"small",onClick:f=>Y(a)},{default:l(()=>e[17]||(e[17]=[o("重启")])),_:2,__:[17]},1032,["onClick"]),t(u,{type:"danger",size:"small",onClick:f=>A(a)},{default:l(()=>e[18]||(e[18]=[o("删除")])),_:2,__:[18]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[L,$.value]])]),_:1})]),_:1}),t(I,{label:"存储设备",name:"storage"},{default:l(()=>[t(S,null,{header:l(()=>[r("div",ce,[e[20]||(e[20]=r("span",null,"存储设备列表",-1)),t(u,{type:"primary",onClick:X},{default:l(()=>[t(c,null,{default:l(()=>[t(P(F))]),_:1}),e[19]||(e[19]=o("添加存储 "))]),_:1,__:[19]})])]),default:l(()=>[E((B(),M(D,{data:y.value,style:{width:"100%"}},{default:l(()=>[t(i,{prop:"name",label:"存储名称"}),t(i,{prop:"type",label:"存储类型"}),t(i,{prop:"capacity",label:"总容量"}),t(i,{prop:"used",label:"已用容量"},{default:l(({row:a})=>[t(N,{percentage:a.used,status:a.used>80?"exception":""},null,8,["percentage","status"])]),_:1}),t(i,{prop:"status",label:"状态"},{default:l(({row:a})=>[t(x,{type:a.status==="normal"?"success":"danger"},{default:l(()=>[o(C(a.status==="normal"?"正常":"异常"),1)]),_:2},1032,["type"])]),_:1}),t(i,{label:"操作",width:"250"},{default:l(({row:a})=>[t(u,{type:"primary",size:"small",onClick:f=>T(a)},{default:l(()=>e[21]||(e[21]=[o("配置")])),_:2,__:[21]},1032,["onClick"]),t(u,{type:"success",size:"small",onClick:f=>z(a)},{default:l(()=>e[22]||(e[22]=[o("监控")])),_:2,__:[22]},1032,["onClick"]),t(u,{type:"danger",size:"small",onClick:f=>A(a)},{default:l(()=>e[23]||(e[23]=[o("删除")])),_:2,__:[23]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[L,$.value]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(q,{modelValue:_.value,"onUpdate:modelValue":e[6]||(e[6]=a=>_.value=a),title:"设备配置",width:"600px"},{footer:l(()=>[r("span",fe,[t(u,{onClick:e[5]||(e[5]=a=>_.value=!1)},{default:l(()=>e[24]||(e[24]=[o("取消")])),_:1,__:[24]}),t(u,{type:"primary",onClick:Z},{default:l(()=>e[25]||(e[25]=[o("确定")])),_:1,__:[25]})])]),default:l(()=>[t(ae,{ref_key:"configFormRef",ref:J,model:n,"label-width":"100px"},{default:l(()=>[t(V,{label:"设备名称"},{default:l(()=>[t(U,{modelValue:n.name,"onUpdate:modelValue":e[1]||(e[1]=a=>n.name=a)},null,8,["modelValue"])]),_:1}),t(V,{label:"IP地址"},{default:l(()=>[t(U,{modelValue:n.ip,"onUpdate:modelValue":e[2]||(e[2]=a=>n.ip=a)},null,8,["modelValue"])]),_:1}),t(V,{label:"设备类型"},{default:l(()=>[t(le,{modelValue:n.type,"onUpdate:modelValue":e[3]||(e[3]=a=>n.type=a),placeholder:"请选择设备类型"},{default:l(()=>[t(R,{label:"交换机",value:"switch"}),t(R,{label:"路由器",value:"router"}),t(R,{label:"防火墙",value:"firewall"})]),_:1},8,["modelValue"])]),_:1}),t(V,{label:"描述"},{default:l(()=>[t(U,{modelValue:n.description,"onUpdate:modelValue":e[4]||(e[4]=a=>n.description=a),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(q,{modelValue:w.value,"onUpdate:modelValue":e[7]||(e[7]=a=>w.value=a),title:"设备监控",width:"800px"},{default:l(()=>[r("div",_e,[r("div",ve,[r("h3",null,C(b.value.name),1),t(x,{type:b.value.status==="online"?"success":"danger"},{default:l(()=>[o(C(b.value.status==="online"?"在线":"离线"),1)]),_:1},8,["type"])]),r("div",ye,[r("div",{ref_key:"cpuChartRef",ref:j,class:"chart"},null,512),r("div",{ref_key:"memoryChartRef",ref:K,class:"chart"},null,512)])])]),_:1},8,["modelValue"])])}}}),Ve=de(ge,[["__scopeId","data-v-ff444a2f"]]);export{Ve as default};
