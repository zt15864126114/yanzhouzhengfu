import{d as Q,A as D,r as b,e as X,j as e,b as l,a as n,k as o,t as m,q as i,m as z,K as Y,l as Z,B as ee,c as T,H as G,G as te,J as f,I as $,o as V}from"./index-D131ZbPc.js";import{_ as le}from"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"resource-container"},oe={class:"card-header"},ae={class:"overview-item"},ne={class:"item-value"},ue={class:"item-progress"},re={class:"overview-item"},ie={class:"item-value"},de={class:"item-progress"},me={class:"overview-item"},pe={class:"item-value"},ce={class:"item-progress"},_e={class:"overview-item"},ve={class:"item-value"},fe={class:"item-progress"},ge={class:"card-header"},ye={class:"dialog-footer"},be=Q({__name:"index",setup(Ve){const r=D({cpu:{total:64,used:45},memory:{total:256,used:60},storage:{total:50,used:35},vm:{total:20,used:75}}),x=b(!1),N=b([{id:1,name:"VM-001",cpu:4,memory:8,storage:100,status:"running",createTime:"2024-01-01 12:00:00"},{id:2,name:"VM-002",cpu:8,memory:16,storage:200,status:"stopped",createTime:"2024-01-02 12:00:00"}]),c=b(!1),C=b(),a=D({name:"",cpu:2,memory:4,storage:50,os:""}),R={name:[{required:!0,message:"请输入虚拟机名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],os:[{required:!0,message:"请选择操作系统",trigger:"change"}]},g=u=>u+"%",q=()=>{x.value=!0,setTimeout(()=>{x.value=!1,f.success("数据已刷新")},1e3)},E=()=>{c.value=!0,a.name="",a.cpu=2,a.memory=4,a.storage=50,a.os=""},F=u=>{c.value=!0,Object.assign(a,u)},P=u=>{$.confirm(`确认启动虚拟机"${u.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{f.success(`虚拟机"${u.name}"启动中`)})},j=u=>{$.confirm(`确认停止虚拟机"${u.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{f.success(`虚拟机"${u.name}"已停止`)})},I=u=>{$.confirm(`确认删除虚拟机"${u.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{f.success(`虚拟机"${u.name}"已删除`)})},O=async()=>{C.value&&await C.value.validate(u=>{u&&(c.value=!1,f.success("创建成功"))})};return(u,t)=>{const U=n("el-icon"),d=n("el-button"),y=n("el-progress"),_=n("el-col"),M=n("el-row"),S=n("el-card"),p=n("el-table-column"),A=n("el-tag"),H=n("el-table"),J=n("el-input"),v=n("el-form-item"),k=n("el-input-number"),B=n("el-option"),K=n("el-select"),L=n("el-form"),W=n("el-dialog"),h=ee("loading");return V(),X("div",se,[e(M,{gutter:20},{default:l(()=>[e(_,{span:24},{default:l(()=>[e(S,{class:"overview-card"},{header:l(()=>[o("div",oe,[t[8]||(t[8]=o("span",null,"资源概览",-1)),e(d,{type:"primary",onClick:q},{default:l(()=>[e(U,null,{default:l(()=>[e(z(Y))]),_:1}),t[7]||(t[7]=i("刷新 "))]),_:1,__:[7]})])]),default:l(()=>[e(M,{gutter:20},{default:l(()=>[e(_,{span:6},{default:l(()=>[o("div",ae,[t[9]||(t[9]=o("div",{class:"item-title"},"CPU总核数",-1)),o("div",ne,m(r.cpu.total),1),o("div",ue,[e(y,{percentage:r.cpu.used,format:g,status:r.cpu.used>80?"exception":""},null,8,["percentage","status"])])])]),_:1}),e(_,{span:6},{default:l(()=>[o("div",re,[t[10]||(t[10]=o("div",{class:"item-title"},"内存总量",-1)),o("div",ie,m(r.memory.total)+"GB",1),o("div",de,[e(y,{percentage:r.memory.used,format:g,status:r.memory.used>80?"exception":""},null,8,["percentage","status"])])])]),_:1}),e(_,{span:6},{default:l(()=>[o("div",me,[t[11]||(t[11]=o("div",{class:"item-title"},"存储总量",-1)),o("div",pe,m(r.storage.total)+"TB",1),o("div",ce,[e(y,{percentage:r.storage.used,format:g,status:r.storage.used>80?"exception":""},null,8,["percentage","status"])])])]),_:1}),e(_,{span:6},{default:l(()=>[o("div",_e,[t[12]||(t[12]=o("div",{class:"item-title"},"虚拟机数量",-1)),o("div",ve,m(r.vm.total),1),o("div",fe,[e(y,{percentage:r.vm.used,format:g,status:r.vm.used>80?"exception":""},null,8,["percentage","status"])])])]),_:1})]),_:1})]),_:1})]),_:1}),e(_,{span:24,class:"mt-20"},{default:l(()=>[e(S,null,{header:l(()=>[o("div",ge,[t[14]||(t[14]=o("span",null,"资源分配",-1)),e(d,{type:"primary",onClick:E},{default:l(()=>[e(U,null,{default:l(()=>[e(z(te))]),_:1}),t[13]||(t[13]=i("创建虚拟机 "))]),_:1,__:[13]})])]),default:l(()=>[Z((V(),T(H,{data:N.value,style:{width:"100%"}},{default:l(()=>[e(p,{prop:"name",label:"虚拟机名称"}),e(p,{prop:"cpu",label:"CPU"},{default:l(({row:s})=>[i(m(s.cpu)+"核 ",1)]),_:1}),e(p,{prop:"memory",label:"内存"},{default:l(({row:s})=>[i(m(s.memory)+"GB ",1)]),_:1}),e(p,{prop:"storage",label:"存储"},{default:l(({row:s})=>[i(m(s.storage)+"GB ",1)]),_:1}),e(p,{prop:"status",label:"状态"},{default:l(({row:s})=>[e(A,{type:s.status==="running"?"success":"danger"},{default:l(()=>[i(m(s.status==="running"?"运行中":"已停止"),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"createTime",label:"创建时间"}),e(p,{label:"操作",width:"300"},{default:l(({row:s})=>[e(d,{type:"primary",size:"small",onClick:w=>F(s)},{default:l(()=>t[15]||(t[15]=[i("配置")])),_:2,__:[15]},1032,["onClick"]),s.status!=="running"?(V(),T(d,{key:0,type:"success",size:"small",onClick:w=>P(s)},{default:l(()=>t[16]||(t[16]=[i("启动")])),_:2,__:[16]},1032,["onClick"])):G("",!0),s.status==="running"?(V(),T(d,{key:1,type:"warning",size:"small",onClick:w=>j(s)},{default:l(()=>t[17]||(t[17]=[i("停止")])),_:2,__:[17]},1032,["onClick"])):G("",!0),e(d,{type:"danger",size:"small",onClick:w=>I(s)},{default:l(()=>t[18]||(t[18]=[i("删除")])),_:2,__:[18]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[h,x.value]])]),_:1})]),_:1})]),_:1}),e(W,{modelValue:c.value,"onUpdate:modelValue":t[6]||(t[6]=s=>c.value=s),title:"创建虚拟机",width:"600px"},{footer:l(()=>[o("span",ye,[e(d,{onClick:t[5]||(t[5]=s=>c.value=!1)},{default:l(()=>t[19]||(t[19]=[i("取消")])),_:1,__:[19]}),e(d,{type:"primary",onClick:O},{default:l(()=>t[20]||(t[20]=[i("确定")])),_:1,__:[20]})])]),default:l(()=>[e(L,{ref_key:"vmFormRef",ref:C,model:a,rules:R,"label-width":"100px"},{default:l(()=>[e(v,{label:"虚拟机名称",prop:"name"},{default:l(()=>[e(J,{modelValue:a.name,"onUpdate:modelValue":t[0]||(t[0]=s=>a.name=s),placeholder:"请输入虚拟机名称"},null,8,["modelValue"])]),_:1}),e(v,{label:"CPU",prop:"cpu"},{default:l(()=>[e(k,{modelValue:a.cpu,"onUpdate:modelValue":t[1]||(t[1]=s=>a.cpu=s),min:1,max:16},null,8,["modelValue"])]),_:1}),e(v,{label:"内存",prop:"memory"},{default:l(()=>[e(k,{modelValue:a.memory,"onUpdate:modelValue":t[2]||(t[2]=s=>a.memory=s),min:1,max:64},null,8,["modelValue"])]),_:1}),e(v,{label:"存储",prop:"storage"},{default:l(()=>[e(k,{modelValue:a.storage,"onUpdate:modelValue":t[3]||(t[3]=s=>a.storage=s),min:10,max:1e3},null,8,["modelValue"])]),_:1}),e(v,{label:"操作系统",prop:"os"},{default:l(()=>[e(K,{modelValue:a.os,"onUpdate:modelValue":t[4]||(t[4]=s=>a.os=s),placeholder:"请选择操作系统"},{default:l(()=>[e(B,{label:"CentOS 7",value:"centos7"}),e(B,{label:"Ubuntu 20.04",value:"ubuntu20"}),e(B,{label:"Windows Server 2019",value:"win2019"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ke=le(be,[["__scopeId","data-v-95bd33ca"]]);export{ke as default};
