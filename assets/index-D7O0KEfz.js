import{d as X,r as f,a as P,v as Y,D as Z,c as ee,b as z,m as T,J as C,e as t,w as l,f as s,i as te,j as d,t as x,M as le,E,o as b}from"./index-Du8AeyGt.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"resource-container"},ne={class:"operation-bar"},re={class:"table-actions"},se={class:"pagination"},de=X({__name:"index",setup(ue){const _=f([{id:1,name:"高性能计算节点",code:"CMP-001",type:"compute",status:"active",owner:"张建国",createTime:"2024-03-20 10:00:00"},{id:2,name:"虚拟机资源池",code:"CMP-002",type:"compute",status:"active",owner:"李伟",createTime:"2024-03-19 09:00:00"},{id:3,name:"企业级存储阵列",code:"STO-001",type:"storage",status:"active",owner:"王芳",createTime:"2024-03-18 14:00:00"},{id:4,name:"分布式备份存储",code:"STO-002",type:"storage",status:"inactive",owner:"赵明",createTime:"2024-03-17 11:00:00"},{id:5,name:"核心交换网络",code:"NET-001",type:"network",status:"active",owner:"陈静",createTime:"2024-03-16 10:00:00"},{id:6,name:"政务专网链路",code:"NET-002",type:"network",status:"inactive",owner:"刘红",createTime:"2024-03-15 09:00:00"},{id:7,name:"办公自动化云桌面",code:"CMP-003",type:"compute",status:"active",owner:"杨伟",createTime:"2024-03-14 15:00:00"},{id:8,name:"政务云对象存储",code:"STO-003",type:"storage",status:"active",owner:"张力",createTime:"2024-03-13 13:00:00"},{id:9,name:"互联网出口带宽",code:"NET-003",type:"network",status:"active",owner:"王华",createTime:"2024-03-12 10:00:00"},{id:10,name:"政务数据同步通道",code:"NET-004",type:"network",status:"inactive",owner:"李霞",createTime:"2024-03-11 08:00:00"}]),N=f([]),r=P({keyword:"",type:""}),v=f(1),w=f(10),B=f(0),g=f(!1),k=f("add"),S=f(),o=P({id:0,name:"",code:"",type:"",status:"active",owner:"",createTime:""}),R={name:[{required:!0,message:"请输入资源名称",trigger:"blur"}],code:[{required:!0,message:"请输入资源编号",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],owner:[{required:!0,message:"请输入负责人",trigger:"blur"}]},M=Y(()=>!!r.type||!!r.keyword),h=n=>n==="compute"?"计算资源":n==="storage"?"存储资源":n==="network"?"网络资源":n,F=n=>{r[n]="",v.value=1,u()},u=()=>{let n=[..._.value];r.keyword&&(n=n.filter(e=>e.name.includes(r.keyword)||e.code.includes(r.keyword))),r.type&&(n=n.filter(e=>e.type===r.type)),B.value=n.length,N.value=n.slice((v.value-1)*w.value,v.value*w.value)},q=()=>{r.keyword="",r.type="",v.value=1,u()},O=()=>{k.value="add",g.value=!0,o.id=0,o.name="",o.code="",o.type="",o.status="active",o.owner="",o.createTime=""},j=n=>{k.value="edit",g.value=!0,Object.assign(o,n)},I=n=>{le.confirm("确定要删除该资源吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=_.value.findIndex(i=>i.id===n.id);e!==-1&&(_.value.splice(e,1),u(),E.success("删除成功"))})},L=async()=>{S.value&&await S.value.validate(n=>{if(n){if(k.value==="add"){const e={...o,id:Date.now(),createTime:new Date().toLocaleString()};_.value.unshift(e),u(),E.success("新增成功")}else{const e=_.value.findIndex(i=>i.id===o.id);e!==-1&&(_.value[e]={...o,id:o.id,createTime:o.createTime},u(),E.success("修改成功"))}g.value=!1}})},$=n=>{w.value=n,u()},K=n=>{v.value=n,u()};return Z(()=>{u()}),(n,e)=>{const i=s("el-input"),p=s("el-form-item"),m=s("el-option"),U=s("el-select"),c=s("el-button"),D=s("el-form"),V=s("el-tag"),A=s("el-row"),y=s("el-table-column"),J=s("el-table"),G=s("el-pagination"),H=s("el-card"),Q=s("el-dialog");return b(),ee("div",oe,[z("div",ne,[t(D,{inline:!0,model:r,class:"search-form"},{default:l(()=>[t(p,null,{default:l(()=>[t(i,{modelValue:r.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>r.keyword=a),placeholder:"资源名称/编号",clearable:"",onKeyup:te(u,["enter"])},null,8,["modelValue"])]),_:1}),t(p,null,{default:l(()=>[t(U,{modelValue:r.type,"onUpdate:modelValue":e[1]||(e[1]=a=>r.type=a),placeholder:"资源类型",clearable:"",style:{width:"140px"}},{default:l(()=>[t(m,{label:"计算资源",value:"compute"}),t(m,{label:"存储资源",value:"storage"}),t(m,{label:"网络资源",value:"network"})]),_:1},8,["modelValue"])]),_:1}),t(p,null,{default:l(()=>[t(c,{type:"primary",onClick:u},{default:l(()=>e[13]||(e[13]=[d("搜索")])),_:1,__:[13]}),t(c,{onClick:q},{default:l(()=>e[14]||(e[14]=[d("重置")])),_:1,__:[14]})]),_:1})]),_:1},8,["model"])]),M.value?(b(),T(A,{key:0,class:"filter-tags",style:{"margin-bottom":"10px"}},{default:l(()=>[r.type?(b(),T(V,{key:0,type:"info",closable:"",onClose:e[2]||(e[2]=()=>F("type"))},{default:l(()=>[d(" 类型："+x(h(r.type)),1)]),_:1})):C("",!0),r.keyword?(b(),T(V,{key:1,type:"info",closable:"",onClose:e[3]||(e[3]=()=>F("keyword"))},{default:l(()=>[d(" 关键词："+x(r.keyword),1)]),_:1})):C("",!0),M.value?(b(),T(c,{key:2,size:"small",type:"text",onClick:q},{default:l(()=>e[15]||(e[15]=[d("清除全部")])),_:1,__:[15]})):C("",!0)]),_:1})):C("",!0),t(H,{class:"resource-list"},{default:l(()=>[t(c,{type:"primary",onClick:O,style:{"margin-bottom":"12px"}},{default:l(()=>e[16]||(e[16]=[d("新增资源")])),_:1,__:[16]}),t(J,{data:N.value,border:"",style:{width:"100%"}},{default:l(()=>[t(y,{prop:"name",label:"资源名称","min-width":"120"}),t(y,{prop:"code",label:"资源编号","min-width":"120"}),t(y,{prop:"type",label:"类型","min-width":"100"},{default:l(({row:a})=>[t(V,null,{default:l(()=>[d(x(h(a.type)),1)]),_:2},1024)]),_:1}),t(y,{prop:"status",label:"状态","min-width":"100"},{default:l(({row:a})=>[t(V,{type:a.status==="active"?"success":"info"},{default:l(()=>[d(x(a.status==="active"?"可用":"停用"),1)]),_:2},1032,["type"])]),_:1}),t(y,{prop:"owner",label:"负责人","min-width":"120"}),t(y,{prop:"createTime",label:"添加时间","min-width":"160"}),t(y,{label:"操作",width:"260"},{default:l(({row:a})=>[z("div",re,[t(c,{type:"primary",link:"",onClick:W=>j(a)},{default:l(()=>e[17]||(e[17]=[d("编辑")])),_:2,__:[17]},1032,["onClick"]),t(c,{type:"danger",link:"",onClick:W=>I(a)},{default:l(()=>e[18]||(e[18]=[d("删除")])),_:2,__:[18]},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),z("div",se,[t(G,{"current-page":v.value,"onUpdate:currentPage":e[4]||(e[4]=a=>v.value=a),"page-size":w.value,"onUpdate:pageSize":e[5]||(e[5]=a=>w.value=a),"page-sizes":[10,20,50,100],total:B.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:$,onCurrentChange:K},null,8,["current-page","page-size","total"])])]),_:1}),t(Q,{modelValue:g.value,"onUpdate:modelValue":e[12]||(e[12]=a=>g.value=a),title:k.value==="add"?"新增资源":"编辑资源",width:"500px"},{footer:l(()=>[t(c,{onClick:e[11]||(e[11]=a=>g.value=!1)},{default:l(()=>e[19]||(e[19]=[d("取消")])),_:1,__:[19]}),t(c,{type:"primary",onClick:L},{default:l(()=>e[20]||(e[20]=[d("确定")])),_:1,__:[20]})]),default:l(()=>[t(D,{ref_key:"resourceFormRef",ref:S,model:o,rules:R,"label-width":"90px"},{default:l(()=>[t(p,{label:"资源名称",prop:"name"},{default:l(()=>[t(i,{modelValue:o.name,"onUpdate:modelValue":e[6]||(e[6]=a=>o.name=a),placeholder:"请输入资源名称"},null,8,["modelValue"])]),_:1}),t(p,{label:"资源编号",prop:"code"},{default:l(()=>[t(i,{modelValue:o.code,"onUpdate:modelValue":e[7]||(e[7]=a=>o.code=a),placeholder:"请输入资源编号"},null,8,["modelValue"])]),_:1}),t(p,{label:"类型",prop:"type"},{default:l(()=>[t(U,{modelValue:o.type,"onUpdate:modelValue":e[8]||(e[8]=a=>o.type=a),placeholder:"请选择类型",style:{width:"140px"}},{default:l(()=>[t(m,{label:"计算资源",value:"compute"}),t(m,{label:"存储资源",value:"storage"}),t(m,{label:"网络资源",value:"network"})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"状态",prop:"status"},{default:l(()=>[t(U,{modelValue:o.status,"onUpdate:modelValue":e[9]||(e[9]=a=>o.status=a),placeholder:"请选择状态",style:{width:"140px"}},{default:l(()=>[t(m,{label:"可用",value:"active"}),t(m,{label:"停用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"负责人",prop:"owner"},{default:l(()=>[t(i,{modelValue:o.owner,"onUpdate:modelValue":e[10]||(e[10]=a=>o.owner=a),placeholder:"请输入负责人"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),me=ae(de,[["__scopeId","data-v-ba4c43c2"]]);export{me as default};
