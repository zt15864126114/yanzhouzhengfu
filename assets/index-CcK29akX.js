import{d as M,r as b,a as N,c as C,e,w as s,f as n,b as r,F as S,n as j,j as u,t as m,E as _,M as L,o as T,m as q,g as H,O as J}from"./index-mid6EVus.js";import{_ as K}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Q={class:"data-container"},R={class:"data-section"},W={class:"storage-info"},X={class:"storage-details"},Y={class:"storage-stats"},Z={class:"data-section"},ee={class:"table-header"},te={class:"dialog-footer"},ae=M({__name:"index",setup(se){const V=b("storage"),x=b([{name:"政务云主存储",used:"28.3TB",total:"50TB",usagePercentage:57},{name:"政务云备份存储",used:"12.5TB",total:"20TB",usagePercentage:63},{name:"业务数据库存储",used:"8.1TB",total:"10TB",usagePercentage:81},{name:"视频监控存储",used:"6.2TB",total:"8TB",usagePercentage:78},{name:"归档存储",used:"35.8TB",total:"50TB",usagePercentage:72},{name:"政务门户存储",used:"1.2TB",total:"5TB",usagePercentage:24},{name:"OA系统存储",used:"2.7TB",total:"5TB",usagePercentage:54}]),i=b([{id:1,name:"政务数据同步",source:"/gov/data",destination:"/cloud/data",size:"1.2TB",status:"进行中",progress:45},{id:2,name:"业务数据库备份",source:"/db/prod",destination:"/backup/db",size:"800GB",status:"已完成",progress:100},{id:3,name:"视频监控归档",source:"/video/live",destination:"/archive/video",size:"2.5TB",status:"暂停中",progress:0},{id:4,name:"用户数据迁移",source:"/user/old",destination:"/user/new",size:"500GB",status:"进行中",progress:68},{id:5,name:"日志文件同步",source:"/logs/current",destination:"/logs/backup",size:"150GB",status:"已完成",progress:100},{id:6,name:"OA系统数据备份",source:"/oa/data",destination:"/backup/oa",size:"300GB",status:"进行中",progress:33},{id:7,name:"门户网站镜像",source:"/portal",destination:"/mirror/portal",size:"200GB",status:"暂停中",progress:0}]),w=o=>o<70?"#67C23A":o<90?"#E6A23C":"#F56C6C",P=o=>{switch(o){case"已完成":return"success";case"暂停中":return"primary";case"进行中":return"info";case"失败":return"danger";default:return"info"}},c=b(!1),l=N({name:"",source:"",destination:"",size:""}),$=()=>{const o=i.value.length+1;i.value.push({id:o,name:l.name,source:l.source,destination:l.destination,size:l.size,status:"暂停中",progress:0}),_.success("已添加传输任务"),c.value=!1,l.name="",l.source="",l.destination="",l.size=""},h=o=>{if(o.status==="暂停中"){if(o.status="进行中",_.info(`继续任务: ${o.name}`),o.progress<100){const t=setInterval(()=>{o.progress+=1,o.progress>=100&&(o.progress=100,o.status="已完成",clearInterval(t))},2e3)}}else o.status="暂停中",_.success(`已暂停任务: ${o.name}`)},D=o=>{L.confirm(`确认删除任务"${o.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const t=i.value.findIndex(v=>v.id===o.id);t!==-1&&(i.value.splice(t,1),_.success("删除成功"))}).catch(()=>{_.info("已取消删除")})};return(o,t)=>{const v=n("el-icon"),z=n("el-progress"),k=n("el-card"),G=n("el-col"),U=n("el-row"),y=n("el-tab-pane"),p=n("el-button"),d=n("el-table-column"),A=n("el-tag"),E=n("el-table"),I=n("el-tabs"),g=n("el-input"),f=n("el-form-item"),F=n("el-form"),O=n("el-dialog");return T(),C("div",Q,[e(k,{class:"data-card"},{header:s(()=>t[8]||(t[8]=[r("div",{class:"card-header"},[r("h2",null,"数据管理")],-1)])),default:s(()=>[e(I,{modelValue:V.value,"onUpdate:modelValue":t[1]||(t[1]=a=>V.value=a)},{default:s(()=>[e(y,{label:"存储数据",name:"storage"},{default:s(()=>[r("div",R,[e(U,{gutter:20},{default:s(()=>[(T(!0),C(S,null,j(x.value,(a,B)=>(T(),q(G,{span:8,key:B},{default:s(()=>[e(k,{class:"storage-card"},{default:s(()=>[r("div",W,[e(v,{size:40,class:"storage-icon"},{default:s(()=>[e(H(J))]),_:1}),r("div",X,[r("h3",null,m(a.name),1),r("div",Y,[e(z,{percentage:a.usagePercentage,color:w(a.usagePercentage)},null,8,["percentage","color"]),r("span",null,"已用空间: "+m(a.used)+" / "+m(a.total),1)])])])]),_:2},1024)]),_:2},1024))),128))]),_:1})])]),_:1}),e(y,{label:"数据传输",name:"transfer"},{default:s(()=>[r("div",Z,[r("div",ee,[e(p,{type:"primary",onClick:t[0]||(t[0]=a=>c.value=!0)},{default:s(()=>t[9]||(t[9]=[u(" 添加数据传输任务 ")])),_:1,__:[9]})]),e(E,{data:i.value,style:{width:"100%"}},{default:s(()=>[e(d,{prop:"id",label:"ID",width:"80"}),e(d,{prop:"name",label:"任务名称"}),e(d,{prop:"source",label:"源位置"}),e(d,{prop:"destination",label:"目标位置"}),e(d,{prop:"size",label:"数据大小"}),e(d,{prop:"status",label:"状态"},{default:s(a=>[e(A,{type:P(a.row.status)},{default:s(()=>[u(m(a.row.status),1)]),_:2},1032,["type"])]),_:1}),e(d,{prop:"progress",label:"进度"},{default:s(a=>[e(z,{percentage:a.row.progress},null,8,["percentage"])]),_:1}),e(d,{label:"操作"},{default:s(a=>[e(p,{size:"small",type:"primary",disabled:a.row.status==="已完成",onClick:B=>h(a.row)},{default:s(()=>[u(m(a.row.status==="暂停中"?"继续":"暂停"),1)]),_:2},1032,["disabled","onClick"]),e(p,{size:"small",type:"danger",onClick:B=>D(a.row)},{default:s(()=>t[10]||(t[10]=[u("删除")])),_:2,__:[10]},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(O,{modelValue:c.value,"onUpdate:modelValue":t[7]||(t[7]=a=>c.value=a),title:"添加数据传输任务",width:"500px"},{footer:s(()=>[r("span",te,[e(p,{onClick:t[6]||(t[6]=a=>c.value=!1)},{default:s(()=>t[11]||(t[11]=[u("取消")])),_:1,__:[11]}),e(p,{type:"primary",onClick:$},{default:s(()=>t[12]||(t[12]=[u("确定")])),_:1,__:[12]})])]),default:s(()=>[e(F,{ref:"transferForm",model:l,"label-width":"120px"},{default:s(()=>[e(f,{label:"任务名称",prop:"name"},{default:s(()=>[e(g,{modelValue:l.name,"onUpdate:modelValue":t[2]||(t[2]=a=>l.name=a),placeholder:"请输入任务名称"},null,8,["modelValue"])]),_:1}),e(f,{label:"源位置",prop:"source"},{default:s(()=>[e(g,{modelValue:l.source,"onUpdate:modelValue":t[3]||(t[3]=a=>l.source=a),placeholder:"请输入源位置"},null,8,["modelValue"])]),_:1}),e(f,{label:"目标位置",prop:"destination"},{default:s(()=>[e(g,{modelValue:l.destination,"onUpdate:modelValue":t[4]||(t[4]=a=>l.destination=a),placeholder:"请输入目标位置"},null,8,["modelValue"])]),_:1}),e(f,{label:"数据大小",prop:"size"},{default:s(()=>[e(g,{modelValue:l.size,"onUpdate:modelValue":t[5]||(t[5]=a=>l.size=a),placeholder:"例如: 500GB"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ne=K(ae,[["__scopeId","data-v-a089ecb0"]]);export{ne as default};
