import{d as le,A as z,r as v,z as ae,e as oe,j as e,b as l,a as i,k as a,t as p,q as d,m as V,K as se,l as L,B as ne,c as D,G as ie,M as re,J as y,I as E,o as T}from"./index-Zp6JxZeZ.js";import{i as q}from"./index-u3wYLQ4o.js";import{_ as de}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"monitor-container"},pe={class:"card-header"},me={class:"monitor-item"},ce={class:"item-value"},_e={class:"item-progress"},ve={class:"monitor-item"},fe={class:"item-value"},ge={class:"item-progress"},ye={class:"monitor-item"},be={class:"item-value"},he={class:"item-progress"},xe={class:"monitor-item"},we={class:"item-value"},Ce={class:"item-progress"},ke={class:"monitor-charts"},Ve={class:"card-header"},Te={class:"header-right"},Ue={class:"card-header"},Me={class:"header-right"},Ae={class:"dialog-footer"},Be=le({__name:"index",setup(Re){const r=z({cpu:45,memory:60,storage:35,network:50}),b=v(!1),F=v([{id:1,name:"CPU使用率过高",type:"cpu",level:"critical",status:"active",createTime:"2024-03-15 14:30:00"},{id:2,name:"内存使用率过高",type:"memory",level:"warning",status:"processed",createTime:"2024-03-15 14:25:00"},{id:3,name:"存储空间不足",type:"storage",level:"warning",status:"active",createTime:"2024-03-15 14:20:00"},{id:4,name:"网络延迟过高",type:"network",level:"normal",status:"processed",createTime:"2024-03-15 14:15:00"},{id:5,name:"数据库连接异常",type:"database",level:"critical",status:"active",createTime:"2024-03-15 14:10:00"}]),N=v([{id:1,time:"2024-03-15 14:30:00",level:"info",module:"系统",content:"系统启动成功"},{id:2,time:"2024-03-15 14:29:00",level:"warning",module:"CPU",content:"CPU使用率超过80%"},{id:3,time:"2024-03-15 14:28:00",level:"error",module:"数据库",content:"数据库连接超时"},{id:4,time:"2024-03-15 14:27:00",level:"info",module:"网络",content:"网络设备状态检查完成"},{id:5,time:"2024-03-15 14:26:00",level:"warning",module:"存储",content:"存储空间使用率超过70%"},{id:6,time:"2024-03-15 14:25:00",level:"info",module:"安全",content:"安全扫描完成"},{id:7,time:"2024-03-15 14:24:00",level:"error",module:"应用",content:"应用服务响应超时"},{id:8,time:"2024-03-15 14:23:00",level:"info",module:"备份",content:"数据备份任务完成"}]),f=v(!1),w=v(),n=z({name:"",type:"",level:"",threshold:80,description:""}),S={name:[{required:!0,message:"请输入告警名称",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择告警类型",trigger:"change"}],level:[{required:!0,message:"请选择告警级别",trigger:"change"}]},U=v(),M=v(),I=s=>({cpu:"danger",memory:"warning",storage:"info",network:"success"})[s]||"info",O=s=>({normal:"info",warning:"warning",critical:"danger"})[s]||"info",j=s=>({info:"info",warning:"warning",error:"danger"})[s]||"info",G=()=>{b.value=!0,setTimeout(()=>{b.value=!1,y.success("数据已刷新")},1e3)},J=()=>{f.value=!0,n.name="",n.type="",n.level="",n.threshold=80,n.description=""},K=s=>{E.confirm(`确认处理告警"${s.name}"吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{y.success(`告警"${s.name}"已处理`)})},H=s=>{E.confirm(`确认删除告警"${s.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{y.success(`告警"${s.name}"已删除`)})},Q=()=>{y.success("日志导出中")},W=async()=>{w.value&&await w.value.validate(s=>{s&&(f.value=!1,y.success("添加成功"))})},X=()=>{const s=q(U.value);s.setOption({title:{text:"CPU使用率趋势"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"]},yAxis:{type:"value",max:100},series:[{data:[30,40,35,50,45,60,55,45],type:"line",smooth:!0}]});const t=q(M.value);t.setOption({title:{text:"内存使用率趋势"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"]},yAxis:{type:"value",max:100},series:[{data:[50,55,60,65,70,65,60,55],type:"line",smooth:!0}]}),window.addEventListener("resize",()=>{s.resize(),t.resize()})};return ae(()=>{X()}),(s,t)=>{const C=i("el-icon"),m=i("el-button"),h=i("el-progress"),c=i("el-col"),A=i("el-row"),k=i("el-card"),u=i("el-table-column"),x=i("el-tag"),B=i("el-table"),R=i("el-input"),g=i("el-form-item"),_=i("el-option"),P=i("el-select"),Y=i("el-input-number"),Z=i("el-form"),ee=i("el-dialog"),$=ne("loading");return T(),oe("div",ue,[e(A,{gutter:20},{default:l(()=>[e(c,{span:24},{default:l(()=>[e(k,{class:"monitor-card"},{header:l(()=>[a("div",pe,[t[8]||(t[8]=a("span",null,"系统监控",-1)),e(m,{type:"primary",onClick:G},{default:l(()=>[e(C,null,{default:l(()=>[e(V(se))]),_:1}),t[7]||(t[7]=d("刷新 "))]),_:1,__:[7]})])]),default:l(()=>[e(A,{gutter:20},{default:l(()=>[e(c,{span:6},{default:l(()=>[a("div",me,[t[9]||(t[9]=a("div",{class:"item-title"},"CPU使用率",-1)),a("div",ce,p(r.cpu)+"%",1),a("div",_e,[e(h,{percentage:r.cpu,status:r.cpu>80?"exception":""},null,8,["percentage","status"])])])]),_:1}),e(c,{span:6},{default:l(()=>[a("div",ve,[t[10]||(t[10]=a("div",{class:"item-title"},"内存使用率",-1)),a("div",fe,p(r.memory)+"%",1),a("div",ge,[e(h,{percentage:r.memory,status:r.memory>80?"exception":""},null,8,["percentage","status"])])])]),_:1}),e(c,{span:6},{default:l(()=>[a("div",ye,[t[11]||(t[11]=a("div",{class:"item-title"},"存储使用率",-1)),a("div",be,p(r.storage)+"%",1),a("div",he,[e(h,{percentage:r.storage,status:r.storage>80?"exception":""},null,8,["percentage","status"])])])]),_:1}),e(c,{span:6},{default:l(()=>[a("div",xe,[t[12]||(t[12]=a("div",{class:"item-title"},"网络带宽",-1)),a("div",we,p(r.network)+"Mbps",1),a("div",Ce,[e(h,{percentage:r.network,status:r.network>80?"exception":""},null,8,["percentage","status"])])])]),_:1})]),_:1}),a("div",ke,[a("div",{ref_key:"cpuChartRef",ref:U,class:"chart"},null,512),a("div",{ref_key:"memoryChartRef",ref:M,class:"chart"},null,512)])]),_:1})]),_:1}),e(c,{span:24,class:"mt-20"},{default:l(()=>[e(k,null,{header:l(()=>[a("div",Ve,[t[14]||(t[14]=a("span",null,"告警管理",-1)),a("div",Te,[e(m,{type:"primary",onClick:J},{default:l(()=>[e(C,null,{default:l(()=>[e(V(ie))]),_:1}),t[13]||(t[13]=d("添加告警规则 "))]),_:1,__:[13]})])])]),default:l(()=>[L((T(),D(B,{data:F.value,style:{width:"100%"}},{default:l(()=>[e(u,{prop:"name",label:"告警名称"}),e(u,{prop:"type",label:"告警类型"},{default:l(({row:o})=>[e(x,{type:I(o.type)},{default:l(()=>[d(p(o.type),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"level",label:"告警级别"},{default:l(({row:o})=>[e(x,{type:O(o.level)},{default:l(()=>[d(p(o.level),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"status",label:"状态"},{default:l(({row:o})=>[e(x,{type:o.status==="active"?"danger":"success"},{default:l(()=>[d(p(o.status==="active"?"未处理":"已处理"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"createTime",label:"创建时间"}),e(u,{label:"操作",width:"200"},{default:l(({row:o})=>[e(m,{type:"primary",size:"small",onClick:te=>K(o)},{default:l(()=>t[15]||(t[15]=[d("处理")])),_:2,__:[15]},1032,["onClick"]),e(m,{type:"danger",size:"small",onClick:te=>H(o)},{default:l(()=>t[16]||(t[16]=[d("删除")])),_:2,__:[16]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[$,b.value]])]),_:1})]),_:1}),e(c,{span:24,class:"mt-20"},{default:l(()=>[e(k,null,{header:l(()=>[a("div",Ue,[t[18]||(t[18]=a("span",null,"系统日志",-1)),a("div",Me,[e(m,{type:"primary",onClick:Q},{default:l(()=>[e(C,null,{default:l(()=>[e(V(re))]),_:1}),t[17]||(t[17]=d("导出日志 "))]),_:1,__:[17]})])])]),default:l(()=>[L((T(),D(B,{data:N.value,style:{width:"100%"}},{default:l(()=>[e(u,{prop:"time",label:"时间",width:"180"}),e(u,{prop:"level",label:"级别"},{default:l(({row:o})=>[e(x,{type:j(o.level)},{default:l(()=>[d(p(o.level),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"module",label:"模块"}),e(u,{prop:"content",label:"内容","show-overflow-tooltip":""})]),_:1},8,["data"])),[[$,b.value]])]),_:1})]),_:1})]),_:1}),e(ee,{modelValue:f.value,"onUpdate:modelValue":t[6]||(t[6]=o=>f.value=o),title:"添加告警规则",width:"600px"},{footer:l(()=>[a("span",Ae,[e(m,{onClick:t[5]||(t[5]=o=>f.value=!1)},{default:l(()=>t[19]||(t[19]=[d("取消")])),_:1,__:[19]}),e(m,{type:"primary",onClick:W},{default:l(()=>t[20]||(t[20]=[d("确定")])),_:1,__:[20]})])]),default:l(()=>[e(Z,{ref_key:"alertFormRef",ref:w,model:n,rules:S,"label-width":"100px"},{default:l(()=>[e(g,{label:"告警名称",prop:"name"},{default:l(()=>[e(R,{modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=o=>n.name=o),placeholder:"请输入告警名称"},null,8,["modelValue"])]),_:1}),e(g,{label:"告警类型",prop:"type"},{default:l(()=>[e(P,{modelValue:n.type,"onUpdate:modelValue":t[1]||(t[1]=o=>n.type=o),placeholder:"请选择告警类型"},{default:l(()=>[e(_,{label:"CPU告警",value:"cpu"}),e(_,{label:"内存告警",value:"memory"}),e(_,{label:"存储告警",value:"storage"}),e(_,{label:"网络告警",value:"network"})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"告警级别",prop:"level"},{default:l(()=>[e(P,{modelValue:n.level,"onUpdate:modelValue":t[2]||(t[2]=o=>n.level=o),placeholder:"请选择告警级别"},{default:l(()=>[e(_,{label:"一般",value:"normal"}),e(_,{label:"警告",value:"warning"}),e(_,{label:"严重",value:"critical"})]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"阈值",prop:"threshold"},{default:l(()=>[e(Y,{modelValue:n.threshold,"onUpdate:modelValue":t[3]||(t[3]=o=>n.threshold=o),min:0,max:100},null,8,["modelValue"])]),_:1}),e(g,{label:"描述"},{default:l(()=>[e(R,{modelValue:n.description,"onUpdate:modelValue":t[4]||(t[4]=o=>n.description=o),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),Le=de(Be,[["__scopeId","data-v-712acd53"]]);export{Le as default};
