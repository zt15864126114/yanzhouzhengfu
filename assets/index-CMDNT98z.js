import{d as ne,r,a as se,D as oe,c as ie,e as t,w as a,f as u,x as L,N as de,m as M,j as i,t as x,b as p,g as O,K as P,M as K,E as w,o as S}from"./index-Du8AeyGt.js";import{i as q}from"./index-u3wYLQ4o.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";const re={class:"device-container"},pe={class:"card-header"},me={class:"card-header"},ce={class:"card-header"},fe={class:"dialog-footer"},_e={class:"monitor-container"},ve={class:"monitor-header"},ye={class:"monitor-charts"},be=ne({__name:"index",setup(Ce){const F=r("network"),B=r(!1),b=r([{id:1,name:"核心交换机-01",ip:"10.10.1.1",type:"switch",brand:"华为",status:"online",lastCheck:"2024-03-20 09:00:00"},{id:2,name:"核心交换机-02",ip:"10.10.1.2",type:"switch",brand:"华三",status:"online",lastCheck:"2024-03-20 09:00:00"},{id:3,name:"边界路由器-01",ip:"10.10.2.1",type:"router",brand:"锐捷",status:"online",lastCheck:"2024-03-20 09:00:00"},{id:4,name:"防火墙-01",ip:"10.10.3.1",type:"firewall",brand:"深信服",status:"online",lastCheck:"2024-03-20 09:00:00"},{id:5,name:"负载均衡器-01",ip:"10.10.4.1",type:"loadbalancer",brand:"F5",status:"maintenance",lastCheck:"2024-03-20 09:00:00"},{id:6,name:"接入交换机-01",ip:"10.10.5.1",type:"switch",brand:"华为",status:"online",lastCheck:"2024-03-20 09:00:00"},{id:7,name:"接入交换机-02",ip:"10.10.5.2",type:"switch",brand:"华三",status:"offline",lastCheck:"2024-03-20 09:00:00"},{id:8,name:"无线控制器-01",ip:"10.10.6.1",type:"controller",brand:"锐捷",status:"online",lastCheck:"2024-03-20 09:00:00"},{id:9,name:"核心路由器-01",ip:"10.10.2.2",type:"router",brand:"华为",status:"online",lastCheck:"2024-03-20 09:00:00"},{id:10,name:"防火墙-02",ip:"10.10.3.2",type:"firewall",brand:"深信服",status:"offline",lastCheck:"2024-03-20 09:00:00"}]),v=r([{id:1,name:"政务应用服务器-01",ip:"10.20.1.10",cpu:45,memory:60,brand:"浪潮",os:"Windows Server 2019",status:"running",lastCheck:"2024-03-20 09:00:00"},{id:2,name:"政务应用服务器-02",ip:"10.20.1.11",cpu:52,memory:68,brand:"华为",os:"CentOS 7",status:"running",lastCheck:"2024-03-20 09:00:00"},{id:3,name:"数据库服务器-01",ip:"10.20.2.10",cpu:75,memory:85,brand:"戴尔",os:"Windows Server 2016",status:"running",lastCheck:"2024-03-20 09:00:00"},{id:4,name:"数据库服务器-02",ip:"10.20.2.11",cpu:68,memory:78,brand:"联想",os:"Ubuntu 20.04",status:"stopped",lastCheck:"2024-03-20 09:00:00"},{id:5,name:"缓存服务器-01",ip:"10.20.3.10",cpu:35,memory:45,brand:"浪潮",os:"CentOS 7",status:"running",lastCheck:"2024-03-20 09:00:00"},{id:6,name:"虚拟化服务器-01",ip:"10.20.4.10",cpu:55,memory:70,brand:"华为",os:"VMware ESXi",status:"running",lastCheck:"2024-03-20 09:00:00"},{id:7,name:"虚拟化服务器-02",ip:"10.20.4.11",cpu:62,memory:80,brand:"戴尔",os:"VMware ESXi",status:"running",lastCheck:"2024-03-20 09:00:00"},{id:8,name:"备份服务器-01",ip:"10.20.5.10",cpu:28,memory:38,brand:"联想",os:"Windows Server 2012",status:"stopped",lastCheck:"2024-03-20 09:00:00"},{id:9,name:"政务门户服务器",ip:"10.20.6.10",cpu:48,memory:55,brand:"浪潮",os:"CentOS 7",status:"running",lastCheck:"2024-03-20 09:00:00"},{id:10,name:"OA系统服务器",ip:"10.20.7.10",cpu:38,memory:50,brand:"华为",os:"Windows Server 2019",status:"running",lastCheck:"2024-03-20 09:00:00"}]),y=r([{id:1,name:"主存储-01",type:"SAN",brand:"华为",capacity:"50TB",used:65,status:"normal",lastCheck:"2024-03-20 09:00:00"},{id:2,name:"主存储-02",type:"SAN",brand:"浪潮",capacity:"50TB",used:58,status:"normal",lastCheck:"2024-03-20 09:00:00"},{id:3,name:"备份存储-01",type:"NAS",brand:"华为",capacity:"30TB",used:45,status:"normal",lastCheck:"2024-03-20 09:00:00"},{id:4,name:"备份存储-02",type:"NAS",brand:"联想",capacity:"30TB",used:42,status:"abnormal",lastCheck:"2024-03-20 09:00:00"},{id:5,name:"归档存储-01",type:"NAS",brand:"戴尔",capacity:"100TB",used:35,status:"normal",lastCheck:"2024-03-20 09:00:00"},{id:6,name:"分布式存储-01",type:"分布式",brand:"华为",capacity:"50TB",used:22,status:"normal",lastCheck:"2024-03-20 09:00:00"},{id:7,name:"分布式存储-02",type:"分布式",brand:"浪潮",capacity:"50TB",used:18,status:"abnormal",lastCheck:"2024-03-20 09:00:00"}]),_=r(!1),G=r(),n=se({name:"",ip:"",type:"",brand:"",os:"",description:""}),T=r(!1),h=r({}),W=r(),j=r(),m=r("network"),C=r(null),H=()=>{_.value=!0,n.name="",n.ip="",n.type="switch",n.brand="",n.os="",n.description="",m.value="network",C.value=null},J=()=>{_.value=!0,n.name="",n.ip="",n.type="server",n.brand="",n.os="",n.description="",m.value="server",C.value=null},Q=()=>{_.value=!0,n.name="",n.ip="",n.type="storage",n.brand="",n.description="",m.value="storage",C.value=null},$=s=>{_.value=!0,Object.assign(n,s),v.value.some(e=>e.id===s.id)?m.value="server":y.value.some(e=>e.id===s.id)?m.value="storage":m.value="network",C.value=s.id},z=s=>{T.value=!0,h.value=s,setTimeout(()=>{ee()},100)},Y=s=>{K.confirm(`确认重启设备"${s.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{w.success(`设备"${s.name}"重启命令已发送`)})},A=s=>{K.confirm(`确认删除设备"${s.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{if(b.value.some(e=>e.id===s.id)){const e=b.value.findIndex(c=>c.id===s.id);e!==-1&&b.value.splice(e,1)}else if(v.value.some(e=>e.id===s.id)){const e=v.value.findIndex(c=>c.id===s.id);e!==-1&&v.value.splice(e,1)}else if(y.value.some(e=>e.id===s.id)){const e=y.value.findIndex(c=>c.id===s.id);e!==-1&&y.value.splice(e,1)}w.success(`设备"${s.name}"已删除`)})},Z=()=>{if(C.value){let s=m.value==="network"?b.value:m.value==="server"?v.value:y.value;const e=s.findIndex(c=>c.id===C.value);e!==-1&&(s[e]={...s[e],...n}),w.success("配置已保存")}else{const s=Date.now();m.value==="network"?b.value.unshift({id:s,name:n.name,ip:n.ip,type:n.type,brand:n.brand||"未知",status:"online",lastCheck:new Date().toLocaleString()}):m.value==="server"?v.value.unshift({id:s,name:n.name,ip:n.ip,cpu:0,memory:0,brand:n.brand||"未知",os:n.os||"未知",status:"running",lastCheck:new Date().toLocaleString()}):m.value==="storage"&&y.value.unshift({id:s,name:n.name,type:n.type,brand:n.brand||"未知",capacity:"10TB",used:0,status:"normal",lastCheck:new Date().toLocaleString()}),w.success("添加成功")}_.value=!1},ee=()=>{const s=q(W.value);s.setOption({title:{text:"CPU使用率"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"]},yAxis:{type:"value",max:100},series:[{data:[30,40,35,50,45,60,55,45],type:"line",smooth:!0}]});const e=q(j.value);e.setOption({title:{text:"内存使用率"},tooltip:{trigger:"axis"},xAxis:{type:"category",data:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"]},yAxis:{type:"value",max:100},series:[{data:[50,55,60,65,70,65,60,55],type:"line",smooth:!0}]}),window.addEventListener("resize",()=>{s.resize(),e.resize()})};return oe(()=>{}),(s,e)=>{const c=u("el-icon"),d=u("el-button"),o=u("el-table-column"),V=u("el-tag"),D=u("el-table"),U=u("el-card"),I=u("el-tab-pane"),N=u("el-progress"),te=u("el-tabs"),g=u("el-input"),k=u("el-form-item"),R=u("el-option"),ae=u("el-select"),le=u("el-form"),X=u("el-dialog"),E=de("loading");return S(),ie("div",re,[t(te,{modelValue:F.value,"onUpdate:modelValue":e[0]||(e[0]=l=>F.value=l)},{default:a(()=>[t(I,{label:"网络设备",name:"network"},{default:a(()=>[t(U,null,{header:a(()=>[p("div",pe,[e[11]||(e[11]=p("span",null,"网络设备列表",-1)),t(d,{type:"primary",onClick:H},{default:a(()=>[t(c,null,{default:a(()=>[t(O(P))]),_:1}),e[10]||(e[10]=i("添加设备 "))]),_:1,__:[10]})])]),default:a(()=>[L((S(),M(D,{data:b.value,style:{width:"100%"}},{default:a(()=>[t(o,{prop:"name",label:"设备名称"}),t(o,{prop:"brand",label:"品牌"}),t(o,{prop:"ip",label:"IP地址"}),t(o,{prop:"type",label:"设备类型"}),t(o,{prop:"status",label:"状态"},{default:a(({row:l})=>[t(V,{type:l.status==="online"?"success":"danger"},{default:a(()=>[i(x(l.status==="online"?"在线":"离线"),1)]),_:2},1032,["type"])]),_:1}),t(o,{prop:"lastCheck",label:"最后检查时间"}),t(o,{label:"操作",width:"250"},{default:a(({row:l})=>[t(d,{type:"primary",size:"small",onClick:f=>$(l)},{default:a(()=>e[12]||(e[12]=[i("配置")])),_:2,__:[12]},1032,["onClick"]),t(d,{type:"success",size:"small",onClick:f=>z(l)},{default:a(()=>e[13]||(e[13]=[i("监控")])),_:2,__:[13]},1032,["onClick"]),t(d,{type:"danger",size:"small",onClick:f=>A(l)},{default:a(()=>e[14]||(e[14]=[i("删除")])),_:2,__:[14]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,B.value]])]),_:1})]),_:1}),t(I,{label:"服务器设备",name:"server"},{default:a(()=>[t(U,null,{header:a(()=>[p("div",me,[e[16]||(e[16]=p("span",null,"服务器设备列表",-1)),t(d,{type:"primary",onClick:J},{default:a(()=>[t(c,null,{default:a(()=>[t(O(P))]),_:1}),e[15]||(e[15]=i("添加服务器 "))]),_:1,__:[15]})])]),default:a(()=>[L((S(),M(D,{data:v.value,style:{width:"100%"}},{default:a(()=>[t(o,{prop:"name",label:"服务器名称"}),t(o,{prop:"brand",label:"品牌"}),t(o,{prop:"ip",label:"IP地址"}),t(o,{prop:"cpu",label:"CPU使用率"},{default:a(({row:l})=>[t(N,{percentage:l.cpu,status:l.cpu>80?"exception":""},null,8,["percentage","status"])]),_:1}),t(o,{prop:"memory",label:"内存使用率"},{default:a(({row:l})=>[t(N,{percentage:l.memory,status:l.memory>80?"exception":""},null,8,["percentage","status"])]),_:1}),t(o,{prop:"status",label:"状态"},{default:a(({row:l})=>[t(V,{type:l.status==="running"?"success":"danger"},{default:a(()=>[i(x(l.status==="running"?"运行中":"已停止"),1)]),_:2},1032,["type"])]),_:1}),t(o,{label:"操作",width:"300"},{default:a(({row:l})=>[t(d,{type:"primary",size:"small",onClick:f=>$(l)},{default:a(()=>e[17]||(e[17]=[i("配置")])),_:2,__:[17]},1032,["onClick"]),t(d,{type:"success",size:"small",onClick:f=>z(l)},{default:a(()=>e[18]||(e[18]=[i("监控")])),_:2,__:[18]},1032,["onClick"]),t(d,{type:"warning",size:"small",onClick:f=>Y(l)},{default:a(()=>e[19]||(e[19]=[i("重启")])),_:2,__:[19]},1032,["onClick"]),t(d,{type:"danger",size:"small",onClick:f=>A(l)},{default:a(()=>e[20]||(e[20]=[i("删除")])),_:2,__:[20]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,B.value]])]),_:1})]),_:1}),t(I,{label:"存储设备",name:"storage"},{default:a(()=>[t(U,null,{header:a(()=>[p("div",ce,[e[22]||(e[22]=p("span",null,"存储设备列表",-1)),t(d,{type:"primary",onClick:Q},{default:a(()=>[t(c,null,{default:a(()=>[t(O(P))]),_:1}),e[21]||(e[21]=i("添加存储 "))]),_:1,__:[21]})])]),default:a(()=>[L((S(),M(D,{data:y.value,style:{width:"100%"}},{default:a(()=>[t(o,{prop:"name",label:"存储名称"}),t(o,{prop:"brand",label:"品牌"}),t(o,{prop:"type",label:"存储类型"}),t(o,{prop:"capacity",label:"总容量"}),t(o,{prop:"used",label:"已用容量"},{default:a(({row:l})=>[t(N,{percentage:l.used,status:l.used>80?"exception":""},null,8,["percentage","status"])]),_:1}),t(o,{prop:"status",label:"状态"},{default:a(({row:l})=>[t(V,{type:l.status==="normal"?"success":"danger"},{default:a(()=>[i(x(l.status==="normal"?"正常":"异常"),1)]),_:2},1032,["type"])]),_:1}),t(o,{label:"操作",width:"250"},{default:a(({row:l})=>[t(d,{type:"primary",size:"small",onClick:f=>$(l)},{default:a(()=>e[23]||(e[23]=[i("配置")])),_:2,__:[23]},1032,["onClick"]),t(d,{type:"success",size:"small",onClick:f=>z(l)},{default:a(()=>e[24]||(e[24]=[i("监控")])),_:2,__:[24]},1032,["onClick"]),t(d,{type:"danger",size:"small",onClick:f=>A(l)},{default:a(()=>e[25]||(e[25]=[i("删除")])),_:2,__:[25]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[E,B.value]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(X,{modelValue:_.value,"onUpdate:modelValue":e[8]||(e[8]=l=>_.value=l),title:"设备配置",width:"600px"},{footer:a(()=>[p("span",fe,[t(d,{onClick:e[7]||(e[7]=l=>_.value=!1)},{default:a(()=>e[26]||(e[26]=[i("取消")])),_:1,__:[26]}),t(d,{type:"primary",onClick:Z},{default:a(()=>e[27]||(e[27]=[i("确定")])),_:1,__:[27]})])]),default:a(()=>[t(le,{ref_key:"configFormRef",ref:G,model:n,"label-width":"100px"},{default:a(()=>[t(k,{label:"设备名称"},{default:a(()=>[t(g,{modelValue:n.name,"onUpdate:modelValue":e[1]||(e[1]=l=>n.name=l)},null,8,["modelValue"])]),_:1}),t(k,{label:"IP地址"},{default:a(()=>[t(g,{modelValue:n.ip,"onUpdate:modelValue":e[2]||(e[2]=l=>n.ip=l)},null,8,["modelValue"])]),_:1}),t(k,{label:"设备类型"},{default:a(()=>[t(ae,{modelValue:n.type,"onUpdate:modelValue":e[3]||(e[3]=l=>n.type=l),placeholder:"请选择设备类型"},{default:a(()=>[t(R,{label:"交换机",value:"switch"}),t(R,{label:"路由器",value:"router"}),t(R,{label:"防火墙",value:"firewall"})]),_:1},8,["modelValue"])]),_:1}),t(k,{label:"品牌"},{default:a(()=>[t(g,{modelValue:n.brand,"onUpdate:modelValue":e[4]||(e[4]=l=>n.brand=l)},null,8,["modelValue"])]),_:1}),t(k,{label:"操作系统"},{default:a(()=>[t(g,{modelValue:n.os,"onUpdate:modelValue":e[5]||(e[5]=l=>n.os=l)},null,8,["modelValue"])]),_:1}),t(k,{label:"描述"},{default:a(()=>[t(g,{modelValue:n.description,"onUpdate:modelValue":e[6]||(e[6]=l=>n.description=l),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),t(X,{modelValue:T.value,"onUpdate:modelValue":e[9]||(e[9]=l=>T.value=l),title:"设备监控",width:"800px"},{default:a(()=>[p("div",_e,[p("div",ve,[p("h3",null,x(h.value.name),1),t(V,{type:h.value.status==="online"?"success":"danger"},{default:a(()=>[i(x(h.value.status==="online"?"在线":"离线"),1)]),_:1},8,["type"])]),p("div",ye,[p("div",{ref_key:"cpuChartRef",ref:W,class:"chart"},null,512),p("div",{ref_key:"memoryChartRef",ref:j,class:"chart"},null,512)])])]),_:1},8,["modelValue"])])}}}),he=ue(be,[["__scopeId","data-v-84e54fe7"]]);export{he as default};
