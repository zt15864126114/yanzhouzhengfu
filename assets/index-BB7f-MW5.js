import{d as U,a as j,r as h,v as J,k as X,D as Y,R as V,c as Z,b as e,e as t,w as s,f as p,t as c,I as v,m as r,j as _,g as l,Z as $,_ as g,$ as k,Y as B,a0 as S,a1 as F,J as q,x as G,y as H,E as K,o as d}from"./index-htt2hZof.js";import{i as N,g as Q}from"./index-BjzP5g9D.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";const te={class:"energy-container"},ae={class:"energy-stats new-style"},se={class:"stat-card2 total"},ne={class:"icon-block"},oe={class:"stat-content"},le={class:"stat-value"},de={class:"stat-card2 server"},re={class:"icon-block"},ie={class:"stat-content"},ce={class:"stat-value"},ue={class:"stat-card2 network"},_e={class:"icon-block"},pe={class:"stat-content"},ve={class:"stat-value"},fe={class:"stat-card2 storage"},me={class:"icon-block"},ye={class:"stat-content"},he={class:"stat-value"},ge={class:"trend-header"},ke={class:"trend-chart-wrap"},be={class:"analysis-section"},we={class:"card-header"},xe=U({__name:"index",setup(Te){const o=j({total:12580,totalTrend:-5.2,server:6850,serverTrend:-3.8,network:3200,networkTrend:-6.5,storage:2530,storageTrend:-4.2}),f=h("day"),x=h(null),m=h(null),b=h(!1),W=h([{name:"核心交换机-01",type:"网络设备",energy:850,trend:-5.2},{name:"存储阵列-02",type:"存储设备",energy:720,trend:-3.8},{name:"应用服务器-03",type:"服务器",energy:680,trend:-4.5},{name:"数据库服务器-01",type:"服务器",energy:650,trend:-2.8},{name:"备份服务器-02",type:"服务器",energy:580,trend:-6.2}]),E={day:{xAxis:["00:00","03:00","06:00","09:00","12:00","15:00","18:00","21:00"],series:[{name:"服务器",data:[320,280,250,380,420,450,400,350]},{name:"网络设备",data:[150,130,120,180,200,220,190,160]},{name:"存储设备",data:[120,110,100,140,160,170,150,130]}]},week:{xAxis:["周一","周二","周三","周四","周五","周六","周日"],series:[{name:"服务器",data:[3200,3100,3300,3400,3200,2800,2900]},{name:"网络设备",data:[1500,1450,1550,1600,1500,1300,1350]},{name:"存储设备",data:[1200,1180,1250,1300,1200,1100,1150]}]},month:{xAxis:["1月","2月","3月","4月","5月","6月"],series:[{name:"服务器",data:[32e3,31e3,33e3,34e3,32e3,28e3]},{name:"网络设备",data:[15e3,14500,15500,16e3,15e3,13e3]},{name:"存储设备",data:[12e3,11800,12500,13e3,12e3,11e3]}]}},D=J(()=>{const i=E[f.value];return i&&i.series.some(a=>a.data&&a.data.length>0)});function y(i){return i>=1e3?`${(i/1e3).toFixed(1)}kWh`:`${i}Wh`}function M(){if(!x.value)return;const i=N(x.value),a=E[f.value];i.setOption({tooltip:{trigger:"axis"},legend:{data:["服务器","网络设备","存储设备"]},grid:{left:40,right:20,top:40,bottom:30},xAxis:{type:"category",data:a.xAxis},yAxis:{type:"value",name:"能耗(Wh)"},color:["#409EFF","#67C23A","#E6A23C"],series:a.series.map(n=>({name:n.name,type:"line",data:n.data,smooth:!0,symbol:"circle",symbolSize:8,lineStyle:{width:3},areaStyle:{opacity:.08}}))})}function z(){if(!m.value)return;N(m.value).setOption({tooltip:{trigger:"item"},legend:{orient:"vertical",left:"left"},color:["#409EFF","#67C23A","#E6A23C"],series:[{type:"pie",radius:"50%",data:[{value:o.server,name:"服务器"},{value:o.network,name:"网络设备"},{value:o.storage,name:"存储设备"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{formatter:"{b}: {d}% ({c}Wh)"}}]})}function I(){if(!m.value)return;const i=Q(m.value);if(i){const a=i.getDataURL({type:"png"}),n=document.createElement("a");n.href=a,n.download="能耗分布.png",n.click(),K.success("导出成功")}}return X(f,()=>{b.value=!0,setTimeout(()=>{b.value=!1,V(()=>{M()})},500)}),Y(()=>{V(()=>{M(),z()})}),(i,a)=>{const n=p("el-icon"),T=p("el-radio-button"),O=p("el-radio-group"),R=p("el-empty"),C=p("el-card"),L=p("el-button"),w=p("el-table-column"),P=p("el-table");return d(),Z("div",te,[e("div",ae,[e("div",se,[e("div",ne,[t(n,null,{default:s(()=>[t(l($))]),_:1})]),e("div",oe,[a[1]||(a[1]=e("div",{class:"stat-title"},"总能耗",-1)),e("div",le,c(y(o.total)),1),e("div",{class:v(["stat-trend",o.totalTrend>=0?"up":"down"])},[o.totalTrend>=0?(d(),r(n,{key:0},{default:s(()=>[t(l(g))]),_:1})):(d(),r(n,{key:1},{default:s(()=>[t(l(k))]),_:1})),_(" "+c(Math.abs(o.totalTrend))+"% ",1)],2)])]),e("div",de,[e("div",re,[t(n,null,{default:s(()=>[t(l(B))]),_:1})]),e("div",ie,[a[2]||(a[2]=e("div",{class:"stat-title"},"服务器能耗",-1)),e("div",ce,c(y(o.server)),1),e("div",{class:v(["stat-trend",o.serverTrend>=0?"up":"down"])},[o.serverTrend>=0?(d(),r(n,{key:0},{default:s(()=>[t(l(g))]),_:1})):(d(),r(n,{key:1},{default:s(()=>[t(l(k))]),_:1})),_(" "+c(Math.abs(o.serverTrend))+"% ",1)],2)])]),e("div",ue,[e("div",_e,[t(n,null,{default:s(()=>[t(l(S))]),_:1})]),e("div",pe,[a[3]||(a[3]=e("div",{class:"stat-title"},"网络设备能耗",-1)),e("div",ve,c(y(o.network)),1),e("div",{class:v(["stat-trend",o.networkTrend>=0?"up":"down"])},[o.networkTrend>=0?(d(),r(n,{key:0},{default:s(()=>[t(l(g))]),_:1})):(d(),r(n,{key:1},{default:s(()=>[t(l(k))]),_:1})),_(" "+c(Math.abs(o.networkTrend))+"% ",1)],2)])]),e("div",fe,[e("div",me,[t(n,null,{default:s(()=>[t(l(F))]),_:1})]),e("div",ye,[a[4]||(a[4]=e("div",{class:"stat-title"},"存储设备能耗",-1)),e("div",he,c(y(o.storage)),1),e("div",{class:v(["stat-trend",o.storageTrend>=0?"up":"down"])},[o.storageTrend>=0?(d(),r(n,{key:0},{default:s(()=>[t(l(g))]),_:1})):(d(),r(n,{key:1},{default:s(()=>[t(l(k))]),_:1})),_(" "+c(Math.abs(o.storageTrend))+"% ",1)],2)])])]),t(C,{class:"trend-card",shadow:"hover"},{default:s(()=>[e("div",ge,[a[8]||(a[8]=e("div",{class:"trend-title"},"能耗趋势",-1)),t(O,{modelValue:f.value,"onUpdate:modelValue":a[0]||(a[0]=u=>f.value=u),size:"small"},{default:s(()=>[t(T,{label:"day"},{default:s(()=>a[5]||(a[5]=[_("日")])),_:1,__:[5]}),t(T,{label:"week"},{default:s(()=>a[6]||(a[6]=[_("周")])),_:1,__:[6]}),t(T,{label:"month"},{default:s(()=>a[7]||(a[7]=[_("月")])),_:1,__:[7]})]),_:1},8,["modelValue"])]),e("div",ke,[b.value?(d(),r(R,{key:0,description:"加载中..."})):D.value?q("",!0):(d(),r(R,{key:1,description:"暂无数据"})),G(e("div",{ref_key:"trendChartRef",ref:x,class:"trend-chart"},null,512),[[H,!b.value&&D.value]])])]),_:1}),e("div",be,[t(C,{class:"analysis-card",shadow:"hover"},{header:s(()=>[e("div",we,[a[10]||(a[10]=e("span",null,"能耗分布",-1)),t(L,{type:"primary",link:"",onClick:I},{default:s(()=>a[9]||(a[9]=[_("导出图片")])),_:1,__:[9]})])]),default:s(()=>[e("div",{ref_key:"pieChartRef",ref:m,class:"pie-chart"},null,512)]),_:1}),t(C,{class:"analysis-card",shadow:"hover"},{header:s(()=>a[11]||(a[11]=[e("div",{class:"card-header"},[e("span",null,"能耗排行")],-1)])),default:s(()=>[t(P,{data:W.value,style:{width:"100%"},class:"ranking-table"},{default:s(()=>[t(w,{prop:"name",label:"设备名称"},{default:s(({row:u,$index:A})=>[e("span",{class:v(["rank-index",A<3?"top"+(A+1):""])},c(A+1),3),u.type==="服务器"?(d(),r(n,{key:0,class:"type-icon"},{default:s(()=>[t(l(B))]),_:1})):u.type==="网络设备"?(d(),r(n,{key:1,class:"type-icon"},{default:s(()=>[t(l(S))]),_:1})):(d(),r(n,{key:2,class:"type-icon"},{default:s(()=>[t(l(F))]),_:1})),e("span",null,c(u.name),1)]),_:1}),t(w,{prop:"type",label:"设备类型"}),t(w,{prop:"energy",label:"能耗"},{default:s(({row:u})=>[_(c(y(u.energy)),1)]),_:1}),t(w,{prop:"trend",label:"趋势"},{default:s(({row:u})=>[e("span",{class:v(u.trend>=0?"up":"down")},[u.trend>=0?(d(),r(n,{key:0,class:"arrow"},{default:s(()=>[t(l(g))]),_:1})):(d(),r(n,{key:1,class:"arrow"},{default:s(()=>[t(l(k))]),_:1})),_(" "+c(Math.abs(u.trend))+"% ",1)],2)]),_:1})]),_:1},8,["data"])]),_:1})])])}}}),De=ee(xe,[["__scopeId","data-v-6375c9ff"]]);export{De as default};
