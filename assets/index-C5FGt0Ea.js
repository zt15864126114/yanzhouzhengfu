import{d as A,r as p,a as z,D as O,c as G,b as S,e as t,w as o,f as i,i as H,j as m,t as J,M as Q,E as k,o as W}from"./index-DZf3JEl4.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"log-container"},Z={class:"operation-bar"},ee={class:"pagination"},te=A({__name:"index",setup(le){const f=p([{id:1,operator:"李明",type:"登录",content:"用户登录系统",ip:"192.168.1.10",result:"成功",time:"2025-04-01 09:00"},{id:2,operator:"王芳",type:"新增",content:"新增用户信息",ip:"192.168.1.11",result:"成功",time:"2025-04-01 08:30"},{id:3,operator:"赵强",type:"删除",content:"删除设备记录",ip:"192.168.1.12",result:"失败",time:"2025-03-31 17:00"},{id:4,operator:"孙丽",type:"修改",content:"修改资源信息",ip:"192.168.1.13",result:"成功",time:"2025-03-31 16:00"},{id:5,operator:"周伟",type:"导出",content:"导出数据报表",ip:"192.168.1.14",result:"成功",time:"2025-03-30 14:00"},{id:6,operator:"马俊",type:"备份",content:"执行数据备份",ip:"192.168.1.15",result:"失败",time:"2025-03-29 11:00"},{id:7,operator:"许静",type:"恢复",content:"恢复备份数据",ip:"192.168.1.16",result:"成功",time:"2025-03-28 09:00"},{id:8,operator:"宋倩",type:"告警",content:"处理安全告警",ip:"192.168.1.17",result:"成功",time:"2025-03-27 13:00"},{id:9,operator:"魏东",type:"登录",content:"用户登录系统",ip:"192.168.1.18",result:"失败",time:"2025-03-26 10:00"},{id:10,operator:"冯媛",type:"修改",content:"修改系统配置",ip:"192.168.1.19",result:"成功",time:"2025-03-25 15:00"}]),x=p([]),r=z({keyword:"",result:""}),g=p(1),v=p(10),C=p(0),y=p(!1),b=p("add"),w=p(),a=z({id:0,operator:"",type:"",content:"",ip:"",result:"成功",time:""}),I={operator:[{required:!0,message:"请输入操作人",trigger:"blur"}],type:[{required:!0,message:"请输入操作类型",trigger:"blur"}],content:[{required:!0,message:"请输入操作内容",trigger:"blur"}],ip:[{required:!0,message:"请输入IP地址",trigger:"blur"}],result:[{required:!0,message:"请选择结果",trigger:"change"}],time:[{required:!0,message:"请选择操作时间",trigger:"change"}]},d=()=>{let n=[...f.value];r.keyword&&(n=n.filter(e=>e.operator.includes(r.keyword)||e.content.includes(r.keyword)||e.type.includes(r.keyword))),r.result&&(n=n.filter(e=>e.result===r.result)),C.value=n.length,x.value=n.slice((g.value-1)*v.value,g.value*v.value)},q=()=>{r.keyword="",r.result="",g.value=1,d()},B=()=>{b.value="add",y.value=!0,a.id=0,a.operator="",a.type="",a.content="",a.ip="",a.result="成功",a.time=""},P=n=>{b.value="edit",y.value=!0,Object.assign(a,n)},E=n=>{Q.confirm("确定要删除该日志吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=f.value.findIndex(u=>u.id===n.id);e!==-1&&(f.value.splice(e,1),d(),k.success("删除成功"))})},D=async()=>{w.value&&await w.value.validate(n=>{if(n){if(b.value==="add"){const e={...a,id:Date.now()};f.value.unshift(e),d(),k.success("新增成功")}else{const e=f.value.findIndex(u=>u.id===a.id);e!==-1&&(f.value[e]={...a,id:a.id},d(),k.success("修改成功"))}y.value=!1}})},F=n=>{v.value=n,d()},L=n=>{g.value=n,d()};return O(()=>{d()}),(n,e)=>{const u=i("el-input"),s=i("el-form-item"),V=i("el-option"),U=i("el-select"),c=i("el-button"),h=i("el-form"),_=i("el-table-column"),M=i("el-tag"),T=i("el-table"),j=i("el-pagination"),N=i("el-card"),R=i("el-date-picker"),$=i("el-dialog");return W(),G("div",Y,[S("div",Z,[t(h,{inline:!0,model:r,class:"search-form"},{default:o(()=>[t(s,null,{default:o(()=>[t(u,{modelValue:r.keyword,"onUpdate:modelValue":e[0]||(e[0]=l=>r.keyword=l),placeholder:"操作人/内容/类型",clearable:"",onKeyup:H(d,["enter"])},null,8,["modelValue"])]),_:1}),t(s,null,{default:o(()=>[t(U,{modelValue:r.result,"onUpdate:modelValue":e[1]||(e[1]=l=>r.result=l),placeholder:"结果",clearable:"",style:{width:"140px"}},{default:o(()=>[t(V,{label:"成功",value:"成功"}),t(V,{label:"失败",value:"失败"})]),_:1},8,["modelValue"])]),_:1}),t(s,null,{default:o(()=>[t(c,{type:"primary",onClick:d},{default:o(()=>e[12]||(e[12]=[m("搜索")])),_:1,__:[12]}),t(c,{onClick:q},{default:o(()=>e[13]||(e[13]=[m("重置")])),_:1,__:[13]})]),_:1})]),_:1},8,["model"])]),t(N,{class:"log-list"},{default:o(()=>[t(c,{type:"primary",link:"",onClick:B,style:{"margin-bottom":"12px"}},{default:o(()=>e[14]||(e[14]=[m("新增日志")])),_:1,__:[14]}),t(T,{data:x.value,border:"",style:{width:"100%"}},{default:o(()=>[t(_,{prop:"operator",label:"操作人","min-width":"100"}),t(_,{prop:"type",label:"操作类型","min-width":"120"}),t(_,{prop:"content",label:"操作内容","min-width":"180"}),t(_,{prop:"ip",label:"IP地址","min-width":"120"}),t(_,{prop:"result",label:"结果","min-width":"80"},{default:o(({row:l})=>[t(M,{type:l.result==="成功"?"success":"danger"},{default:o(()=>[m(J(l.result),1)]),_:2},1032,["type"])]),_:1}),t(_,{prop:"time",label:"操作时间","min-width":"160"}),t(_,{label:"操作",width:"180"},{default:o(({row:l})=>[t(c,{type:"primary",link:"",onClick:K=>P(l)},{default:o(()=>e[15]||(e[15]=[m("编辑")])),_:2,__:[15]},1032,["onClick"]),t(c,{type:"danger",link:"",onClick:K=>E(l)},{default:o(()=>e[16]||(e[16]=[m("删除")])),_:2,__:[16]},1032,["onClick"])]),_:1})]),_:1},8,["data"]),S("div",ee,[t(j,{"current-page":g.value,"onUpdate:currentPage":e[2]||(e[2]=l=>g.value=l),"page-size":v.value,"onUpdate:pageSize":e[3]||(e[3]=l=>v.value=l),"page-sizes":[10,20,50,100],total:C.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:F,onCurrentChange:L},null,8,["current-page","page-size","total"])])]),_:1}),t($,{modelValue:y.value,"onUpdate:modelValue":e[11]||(e[11]=l=>y.value=l),title:b.value==="add"?"新增日志":"编辑日志",width:"500px"},{footer:o(()=>[t(c,{onClick:e[10]||(e[10]=l=>y.value=!1)},{default:o(()=>e[17]||(e[17]=[m("取消")])),_:1,__:[17]}),t(c,{type:"primary",onClick:D},{default:o(()=>e[18]||(e[18]=[m("确定")])),_:1,__:[18]})]),default:o(()=>[t(h,{ref_key:"logFormRef",ref:w,model:a,rules:I,"label-width":"90px"},{default:o(()=>[t(s,{label:"操作人",prop:"operator"},{default:o(()=>[t(u,{modelValue:a.operator,"onUpdate:modelValue":e[4]||(e[4]=l=>a.operator=l),placeholder:"请输入操作人"},null,8,["modelValue"])]),_:1}),t(s,{label:"操作类型",prop:"type"},{default:o(()=>[t(u,{modelValue:a.type,"onUpdate:modelValue":e[5]||(e[5]=l=>a.type=l),placeholder:"请输入操作类型"},null,8,["modelValue"])]),_:1}),t(s,{label:"操作内容",prop:"content"},{default:o(()=>[t(u,{modelValue:a.content,"onUpdate:modelValue":e[6]||(e[6]=l=>a.content=l),placeholder:"请输入操作内容"},null,8,["modelValue"])]),_:1}),t(s,{label:"IP地址",prop:"ip"},{default:o(()=>[t(u,{modelValue:a.ip,"onUpdate:modelValue":e[7]||(e[7]=l=>a.ip=l),placeholder:"请输入IP地址"},null,8,["modelValue"])]),_:1}),t(s,{label:"结果",prop:"result"},{default:o(()=>[t(U,{modelValue:a.result,"onUpdate:modelValue":e[8]||(e[8]=l=>a.result=l),placeholder:"请选择结果",style:{width:"140px"}},{default:o(()=>[t(V,{label:"成功",value:"成功"}),t(V,{label:"失败",value:"失败"})]),_:1},8,["modelValue"])]),_:1}),t(s,{label:"操作时间",prop:"time"},{default:o(()=>[t(R,{modelValue:a.time,"onUpdate:modelValue":e[9]||(e[9]=l=>a.time=l),type:"datetime",placeholder:"选择时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),ne=X(te,[["__scopeId","data-v-e4c36b1e"]]);export{ne as default};
