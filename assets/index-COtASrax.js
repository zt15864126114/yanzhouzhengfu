import{d as X,r as f,a as R,v as Y,D as Z,c as ee,b as z,m as x,J as C,e as t,w as l,f as s,i as te,j as u,t as T,M as le,E as B,o as b}from"./index-Dpg9Li3K.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"resource-container"},ne={class:"operation-bar"},re={class:"table-actions"},se={class:"pagination"},ue=X({__name:"index",setup(de){const y=f([{id:1,name:"高性能计算节点",code:"CMP-001",type:"compute",status:"active",owner:"张三",createTime:"2024-03-20 10:00:00"},{id:2,name:"企业级存储阵列",code:"STO-002",type:"storage",status:"active",owner:"李四",createTime:"2024-03-19 09:00:00"},{id:3,name:"核心交换网络",code:"NET-003",type:"network",status:"inactive",owner:"王五",createTime:"2024-03-18 14:00:00"}]),h=f([]),r=R({keyword:"",type:""}),_=f(1),w=f(10),E=f(0),g=f(!1),k=f("add"),S=f(),o=R({id:0,name:"",code:"",type:"",status:"active",owner:"",createTime:""}),j={name:[{required:!0,message:"请输入资源名称",trigger:"blur"}],code:[{required:!0,message:"请输入资源编号",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],owner:[{required:!0,message:"请输入负责人",trigger:"blur"}]},F=Y(()=>!!r.type||!!r.keyword),N=n=>n==="compute"?"计算资源":n==="storage"?"存储资源":n==="network"?"网络资源":n,q=n=>{r[n]="",_.value=1,d()},d=()=>{let n=[...y.value];r.keyword&&(n=n.filter(e=>e.name.includes(r.keyword)||e.code.includes(r.keyword))),r.type&&(n=n.filter(e=>e.type===r.type)),E.value=n.length,h.value=n.slice((_.value-1)*w.value,_.value*w.value)},D=()=>{r.keyword="",r.type="",_.value=1,d()},I=()=>{k.value="add",g.value=!0,o.id=0,o.name="",o.code="",o.type="",o.status="active",o.owner="",o.createTime=""},L=n=>{k.value="edit",g.value=!0,Object.assign(o,n)},P=n=>{le.confirm("确定要删除该资源吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=y.value.findIndex(i=>i.id===n.id);e!==-1&&(y.value.splice(e,1),d(),B.success("删除成功"))})},$=async()=>{S.value&&await S.value.validate(n=>{if(n){if(k.value==="add"){const e={...o,id:Date.now(),createTime:new Date().toLocaleString()};y.value.unshift(e),d(),B.success("新增成功")}else{const e=y.value.findIndex(i=>i.id===o.id);e!==-1&&(y.value[e]={...o,id:o.id,createTime:o.createTime},d(),B.success("修改成功"))}g.value=!1}})},K=n=>{w.value=n,d()},O=n=>{_.value=n,d()};return Z(()=>{d()}),(n,e)=>{const i=s("el-input"),p=s("el-form-item"),m=s("el-option"),U=s("el-select"),c=s("el-button"),M=s("el-form"),V=s("el-tag"),A=s("el-row"),v=s("el-table-column"),J=s("el-table"),G=s("el-pagination"),H=s("el-card"),Q=s("el-dialog");return b(),ee("div",oe,[z("div",ne,[t(M,{inline:!0,model:r,class:"search-form"},{default:l(()=>[t(p,null,{default:l(()=>[t(i,{modelValue:r.keyword,"onUpdate:modelValue":e[0]||(e[0]=a=>r.keyword=a),placeholder:"资源名称/编号",clearable:"",onKeyup:te(d,["enter"])},null,8,["modelValue"])]),_:1}),t(p,null,{default:l(()=>[t(U,{modelValue:r.type,"onUpdate:modelValue":e[1]||(e[1]=a=>r.type=a),placeholder:"资源类型",clearable:"",style:{width:"140px"}},{default:l(()=>[t(m,{label:"计算资源",value:"compute"}),t(m,{label:"存储资源",value:"storage"}),t(m,{label:"网络资源",value:"network"})]),_:1},8,["modelValue"])]),_:1}),t(p,null,{default:l(()=>[t(c,{type:"primary",onClick:d},{default:l(()=>e[13]||(e[13]=[u("搜索")])),_:1,__:[13]}),t(c,{onClick:D},{default:l(()=>e[14]||(e[14]=[u("重置")])),_:1,__:[14]})]),_:1})]),_:1},8,["model"])]),F.value?(b(),x(A,{key:0,class:"filter-tags",style:{"margin-bottom":"10px"}},{default:l(()=>[r.type?(b(),x(V,{key:0,type:"info",closable:"",onClose:e[2]||(e[2]=()=>q("type"))},{default:l(()=>[u(" 类型："+T(N(r.type)),1)]),_:1})):C("",!0),r.keyword?(b(),x(V,{key:1,type:"info",closable:"",onClose:e[3]||(e[3]=()=>q("keyword"))},{default:l(()=>[u(" 关键词："+T(r.keyword),1)]),_:1})):C("",!0),F.value?(b(),x(c,{key:2,size:"small",type:"text",onClick:D},{default:l(()=>e[15]||(e[15]=[u("清除全部")])),_:1,__:[15]})):C("",!0)]),_:1})):C("",!0),t(H,{class:"resource-list"},{default:l(()=>[t(c,{type:"primary",onClick:I,style:{"margin-bottom":"12px"}},{default:l(()=>e[16]||(e[16]=[u("新增资源")])),_:1,__:[16]}),t(J,{data:h.value,border:"",style:{width:"100%"}},{default:l(()=>[t(v,{prop:"name",label:"资源名称","min-width":"120"}),t(v,{prop:"code",label:"资源编号","min-width":"120"}),t(v,{prop:"type",label:"类型","min-width":"100"},{default:l(({row:a})=>[t(V,null,{default:l(()=>[u(T(N(a.type)),1)]),_:2},1024)]),_:1}),t(v,{prop:"status",label:"状态","min-width":"100"},{default:l(({row:a})=>[t(V,{type:a.status==="active"?"success":"info"},{default:l(()=>[u(T(a.status==="active"?"可用":"停用"),1)]),_:2},1032,["type"])]),_:1}),t(v,{prop:"owner",label:"负责人","min-width":"120"}),t(v,{prop:"createTime",label:"添加时间","min-width":"160"}),t(v,{label:"操作",width:"260"},{default:l(({row:a})=>[z("div",re,[t(c,{type:"primary",link:"",onClick:W=>L(a)},{default:l(()=>e[17]||(e[17]=[u("编辑")])),_:2,__:[17]},1032,["onClick"]),t(c,{type:"danger",link:"",onClick:W=>P(a)},{default:l(()=>e[18]||(e[18]=[u("删除")])),_:2,__:[18]},1032,["onClick"])])]),_:1})]),_:1},8,["data"]),z("div",se,[t(G,{"current-page":_.value,"onUpdate:currentPage":e[4]||(e[4]=a=>_.value=a),"page-size":w.value,"onUpdate:pageSize":e[5]||(e[5]=a=>w.value=a),"page-sizes":[10,20,50,100],total:E.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:K,onCurrentChange:O},null,8,["current-page","page-size","total"])])]),_:1}),t(Q,{modelValue:g.value,"onUpdate:modelValue":e[12]||(e[12]=a=>g.value=a),title:k.value==="add"?"新增资源":"编辑资源",width:"500px"},{footer:l(()=>[t(c,{onClick:e[11]||(e[11]=a=>g.value=!1)},{default:l(()=>e[19]||(e[19]=[u("取消")])),_:1,__:[19]}),t(c,{type:"primary",onClick:$},{default:l(()=>e[20]||(e[20]=[u("确定")])),_:1,__:[20]})]),default:l(()=>[t(M,{ref_key:"resourceFormRef",ref:S,model:o,rules:j,"label-width":"90px"},{default:l(()=>[t(p,{label:"资源名称",prop:"name"},{default:l(()=>[t(i,{modelValue:o.name,"onUpdate:modelValue":e[6]||(e[6]=a=>o.name=a),placeholder:"请输入资源名称"},null,8,["modelValue"])]),_:1}),t(p,{label:"资源编号",prop:"code"},{default:l(()=>[t(i,{modelValue:o.code,"onUpdate:modelValue":e[7]||(e[7]=a=>o.code=a),placeholder:"请输入资源编号"},null,8,["modelValue"])]),_:1}),t(p,{label:"类型",prop:"type"},{default:l(()=>[t(U,{modelValue:o.type,"onUpdate:modelValue":e[8]||(e[8]=a=>o.type=a),placeholder:"请选择类型",style:{width:"140px"}},{default:l(()=>[t(m,{label:"计算资源",value:"compute"}),t(m,{label:"存储资源",value:"storage"}),t(m,{label:"网络资源",value:"network"})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"状态",prop:"status"},{default:l(()=>[t(U,{modelValue:o.status,"onUpdate:modelValue":e[9]||(e[9]=a=>o.status=a),placeholder:"请选择状态",style:{width:"140px"}},{default:l(()=>[t(m,{label:"可用",value:"active"}),t(m,{label:"停用",value:"inactive"})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"负责人",prop:"owner"},{default:l(()=>[t(i,{modelValue:o.owner,"onUpdate:modelValue":e[10]||(e[10]=a=>o.owner=a),placeholder:"请输入负责人"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),me=ae(ue,[["__scopeId","data-v-5c952a70"]]);export{me as default};
